!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.keypress=t():e.keypress=t()}(this,function(){return function(e){function t(n){if(s[n])return s[n].exports;var r=s[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var s={};return t.m=e,t.c=s,t.d=function(e,s,n){t.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,s){var n,r,i,o,_,c,u,l,a,h,f,d,y,m,p,k,v,g,b,w,q,x,j,O,E={}.hasOwnProperty,z=[].indexOf;h={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1,normalize_caps_lock:!1},x=["meta","alt","option","ctrl","shift","cmd"],w="ctrl",(O={}).debug=!1,i=class{constructor(e){var t,s;for(t in e)E.call(e,t)&&!1!==(s=e[t])&&(this[t]=s);this.keys=this.keys||[],this.count=this.count||0}allows_key_repeat(){return!this.prevent_repeat&&"function"==typeof this.on_keydown}reset(){return this.count=0,this.keyup_fired=null}},O.Listener=class{constructor(e,t){var s,n,r;"undefined"!=typeof jQuery&&null!==jQuery&&e instanceof jQuery&&(1!==e.length&&b("Warning: your jQuery selector should have exactly one object."),e=e[0]),this.should_suppress_event_defaults=!1,this.should_force_event_defaults=!1,this.sequence_delay=800,this._registered_combos=[],this._keys_down=[],this._active_combos=[],this._sequence=[],this._sequence_timer=null,this._prevent_capture=!1,this._defaults=t||{};for(n in h)E.call(h,n)&&(r=h[n],this._defaults[n]=this._defaults[n]||r);this.element=e||document.body,s=function(e,t,s){return e.addEventListener?e.addEventListener(t,s):e.attachEvent&&e.attachEvent(`on${t}`,s),s},this.keydown_event=s(this.element,"keydown",e=>(e=e||window.event,this._receive_input(e,!0),this._bug_catcher(e))),this.keyup_event=s(this.element,"keyup",e=>(e=e||window.event,this._receive_input(e,!1))),this.blur_event=s(window,"blur",()=>{var e,t,s,n;for(t=0,s=(n=this._keys_down).length;t<s;t++)e=n[t],this._key_up(e,{});return this._keys_down=[]})}destroy(){var e;return(e=function(e,t,s){return null!=e.removeEventListener?e.removeEventListener(t,s):null!=e.removeEvent?e.removeEvent(`on${t}`,s):void 0})(this.element,"keydown",this.keydown_event),e(this.element,"keyup",this.keyup_event),e(window,"blur",this.blur_event)}_bug_catcher(e){var t,s;if("cmd"===w&&z.call(this._keys_down,"cmd")>=0&&"cmd"!==(t=u(null!=(s=e.keyCode)?s:e.key))&&"shift"!==t&&"alt"!==t&&"caps"!==t&&"tab"!==t)return this._receive_input(e,!1)}_cmd_bug_check(e){return!("cmd"===w&&z.call(this._keys_down,"cmd")>=0&&z.call(e,"cmd")<0)}_prevent_default(e,t){if((t||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation))return e.stopPropagation()}_get_active_combos(e){var t,s;return t=[],(s=f(this._keys_down,function(t){return t!==e})).push(e),this._match_combo_arrays(s,e=>{if(this._cmd_bug_check(e.keys))return t.push(e)}),this._fuzzy_match_combo_arrays(s,e=>{if(!(z.call(t,e)>=0))return!e.is_solitary&&this._cmd_bug_check(e.keys)?t.push(e):void 0}),t}_get_potential_combos(e){var t,s,n,r,i;for(r=[],s=0,n=(i=this._registered_combos).length;s<n;s++)(t=i[s]).is_sequence||z.call(t.keys,e)>=0&&this._cmd_bug_check(t.keys)&&r.push(t);return r}_add_to_active_combos(e){var t,s,n,r,i,o,_,c,u,l,a,h,f,d,y;if(y=!1,d=!0,r=!1,z.call(this._active_combos,e)>=0)return!0;if(this._active_combos.length)for(o=_=0,h=this._active_combos.length;0<=h?_<h:_>h;o=0<=h?++_:--_)if((t=this._active_combos[o])&&t.is_exclusive&&e.is_exclusive){if(n=t.keys,!y)for(l=0,c=n.length;l<c;l++)if(s=n[l],y=!0,z.call(e.keys,s)<0){y=!1;break}if(d&&!y)for(a=0,u=(f=e.keys).length;a<u;a++)if(i=f[a],d=!1,z.call(n,i)<0){d=!0;break}y&&(r?null!=(t=this._active_combos.splice(o,1)[0])&&t.reset():(null!=(t=this._active_combos.splice(o,1,e)[0])&&t.reset(),r=!0),d=!1)}return d&&this._active_combos.unshift(e),y||d}_remove_from_active_combos(e){var t,s,n;for(t=s=0,n=this._active_combos.length;0<=n?s<n:s>n;t=0<=n?++s:--s)if(this._active_combos[t]===e){(e=this._active_combos.splice(t,1)[0]).reset();break}}_get_possible_sequences(){var e,t,s,n,r,i,o,_,c,u,l,a,h;for(_=[],n=0,r=(u=this._registered_combos).length;n<r;n++)for(e=u[n],s=i=1,l=this._sequence.length;1<=l?i<=l:i>=l;s=1<=l?++i:--i)if(h=this._sequence.slice(-s),e.is_sequence&&(!(z.call(e.keys,"shift")<0)||(h=f(h,function(e){return"shift"!==e})).length)){for(t=c=0,a=h.length;0<=a?c<a:c>a;t=0<=a?++c:--c){if(e.keys[t]!==h[t]){o=!1;break}o=!0}o&&_.push(e)}return _}_add_key_to_sequence(e,t){var s,n,r,i;if(this._sequence.push(e),(i=this._get_possible_sequences()).length){for(n=0,r=i.length;n<r;n++)s=i[n],this._prevent_default(t,s.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer),this.sequence_delay>-1&&(this._sequence_timer=setTimeout(()=>this._sequence=[],this.sequence_delay))}else this._sequence=[]}_get_sequence(e){var t,s,n,r,i,o,_,c,u,l,a,h,d;for(r=0,i=(u=this._registered_combos).length;r<i;r++)if((t=u[r]).is_sequence){for(n=o=1,l=this._sequence.length;1<=l?o<=l:o>=l;n=1<=l?++o:--o)if(d=f(this._sequence,function(e){return z.call(t.keys,"shift")>=0||"shift"!==e}).slice(-n),t.keys.length===d.length)for(s=c=0,a=d.length;0<=a?c<a:c>a;s=0<=a?++c:--c)if(h=d[s],!(z.call(t.keys,"shift")<0&&"shift"===h||"shift"===e&&z.call(t.keys,"shift")<0)){if(t.keys[s]!==h){_=!1;break}_=!0}if(_)return t.is_exclusive&&(this._sequence=[]),t}return!1}_receive_input(e,t){var s,n;if(this._prevent_capture)this._keys_down.length&&(this._keys_down=[]);else if(s=u(null!=(n=e.keyCode)?n:e.key),(t||this._keys_down.length||"alt"!==s&&s!==w)&&s)return t?this._key_down(s,e):this._key_up(s,e)}_fire(e,t,s,n){if("function"==typeof t["on_"+e]&&this._prevent_default(s,!0!==t["on_"+e].call(t.this,s,t.count,n)),"release"===e&&(t.count=0),"keyup"===e)return t.keyup_fired=!0}_match_combo_arrays(e,t){var s,n,r,i,o;for(n=0,r=(i=this._registered_combos).length;n<r;n++)o=i[n],s=e.slice(0),o.normalize_caps_lock&&z.call(s,"caps")>=0&&s.splice(s.indexOf("caps"),1),(!o.is_unordered&&c(s,o.keys)||o.is_unordered&&_(s,o.keys))&&t(o)}_fuzzy_match_combo_arrays(e,t){var s,n,r,i;for(s=0,n=(r=this._registered_combos).length;s<n;s++)(!(i=r[s]).is_unordered&&m(i.keys,e)||i.is_unordered&&y(i.keys,e))&&t(i)}_keys_remain(e){var t,s,n,r,i;for(n=0,r=(i=e.keys).length;n<r;n++)if(t=i[n],z.call(this._keys_down,t)>=0){s=!0;break}return s}_key_down(e,t){var s,n,r,i,o,_,c,u,a,h,f,d,y,m,p;(p=l(e,t))&&(e=p),this._add_key_to_sequence(e,t),(m=this._get_sequence(e))&&this._fire("keydown",m,t);for(a in q)t[r=q[a]]&&(a===e||z.call(this._keys_down,a)>=0||this._keys_down.push(a));for(a in q)if(r=q[a],a!==e&&z.call(this._keys_down,a)>=0&&!t[r]){if("cmd"===a&&"cmd"!==w)continue;for(i=o=0,y=this._keys_down.length;0<=y?o<y:o>y;i=0<=y?++o:--o)this._keys_down[i]===a&&this._keys_down.splice(i,1)}for(n=this._get_active_combos(e),d=this._get_potential_combos(e),u=0,_=n.length;u<_;u++)s=n[u],this._handle_combo_down(s,d,e,t);if(d.length)for(h=0,c=d.length;h<c;h++)f=d[h],this._prevent_default(t,f.prevent_default);z.call(this._keys_down,e)<0&&this._keys_down.push(e)}_handle_combo_down(e,t,s,n){var r,i,o,_,c,u;if(z.call(e.keys,s)<0)return!1;if(this._prevent_default(n,e&&e.prevent_default),r=!1,z.call(this._keys_down,s)>=0&&(r=!0,!e.allows_key_repeat()))return!1;if(u=this._add_to_active_combos(e,s),e.keyup_fired=!1,i=!1,e.is_exclusive)for(o=0,_=t.length;o<_;o++)if((c=t[o]).is_exclusive&&c.keys.length>e.keys.length){i=!0;break}return!i&&(e.is_counting&&"function"==typeof e.on_keydown&&(e.count+=1),u)?this._fire("keydown",e,n,r):void 0}_key_up(e,t){var s,n,r,i,o,_,c,u,a,h,f,d,y,m,p,k,v,b,w;if(w=e,(b=l(e,t))&&(e=b),b=g[w],t.shiftKey?b&&z.call(this._keys_down,b)>=0||(e=w):w&&z.call(this._keys_down,w)>=0||(e=b),(v=this._get_sequence(e))&&this._fire("keyup",v,t),z.call(this._keys_down,e)<0)return!1;for(o=_=0,y=this._keys_down.length;0<=y?_<y:_>y;o=0<=y?++_:--_)if((m=this._keys_down[o])===e||m===b||m===w){this._keys_down.splice(o,1);break}for(n=this._active_combos.length,i=[],h=0,c=(p=this._active_combos).length;h<c;h++)s=p[h],z.call(s.keys,e)>=0&&i.push(s);for(f=0,u=i.length;f<u;f++)r=i[f],this._handle_combo_up(r,t,e);if(n>1)for(d=0,a=(k=this._active_combos).length;d<a;d++)void 0===(s=k[d])||z.call(i,s)>=0||this._keys_remain(s)||this._remove_from_active_combos(s)}_handle_combo_up(e,t,s){var n,r;this._prevent_default(t,e&&e.prevent_default),r=this._keys_remain(e),e.keyup_fired||((n=this._keys_down.slice()).push(s),e.is_solitary&&!_(n,e.keys)||(this._fire("keyup",e,t),e.is_counting&&"function"==typeof e.on_keyup&&"function"!=typeof e.on_keydown&&(e.count+=1))),r||(this._fire("release",e,t),this._remove_from_active_combos(e))}simple_combo(e,t){return this.register_combo({keys:e,on_keydown:t})}counting_combo(e,t){return this.register_combo({keys:e,is_counting:!0,is_unordered:!1,on_keydown:t})}sequence_combo(e,t){return this.register_combo({keys:e,on_keydown:t,is_sequence:!0,is_exclusive:!0})}register_combo(e){var t,s,n,r;"string"==typeof e.keys&&(e.keys=e.keys.split(" ")),n=this._defaults;for(s in n)E.call(n,s)&&(r=n[s],void 0===e[s]&&(e[s]=r));if(t=new i(e),j(t))return this._registered_combos.push(t),t}register_many(e){var t,s,n,r;for(r=[],s=0,n=e.length;s<n;s++)t=e[s],r.push(this.register_combo(t));return r}unregister_combo(e){var t,s,n,r,o,u;if(!e)return!1;if(u=(e=>{var t,s,n,r;for(r=[],t=s=0,n=this._registered_combos.length;0<=n?s<n:s>n;t=0<=n?++s:--s){if(e===this._registered_combos[t]){this._registered_combos.splice(t,1);break}r.push(void 0)}return r}),e instanceof i)return u(e);for("string"==typeof e&&(e=e.split(" ")),o=[],s=0,n=(r=this._registered_combos).length;s<n;s++)null!=(t=r[s])&&(t.is_unordered&&_(e,t.keys)||!t.is_unordered&&c(e,t.keys)?o.push(u(t)):o.push(void 0));return o}unregister_many(e){var t,s,n,r;for(r=[],s=0,n=e.length;s<n;s++)t=e[s],r.push(this.unregister_combo(t));return r}get_registered_combos(){return this._registered_combos}reset(){return this._registered_combos=[]}listen(){return this._prevent_capture=!1}stop_listening(){return this._prevent_capture=!0}get_meta_key(){return w}},a=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(w="cmd")},o=function(){-1!==navigator.userAgent.indexOf("Opera")&&(v[17]="cmd")},u=function(e){return v[e]},f=function(e,t){var s;return e.filter?e.filter(t):function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)s=e[n],t(s)&&i.push(s);return i}()},_=function(e,t){var s,n,r;if(e.length!==t.length)return!1;for(n=0,r=e.length;n<r;n++)if(s=e[n],!(z.call(t,s)>=0))return!1;return!0},c=function(e,t){var s,n,r;if(e.length!==t.length)return!1;for(s=n=0,r=e.length;0<=r?n<r:n>r;s=0<=r?++n:--n)if(e[s]!==t[s])return!1;return!0},y=function(e,t){var s,n,r;for(n=0,r=e.length;n<r;n++)if(s=e[n],z.call(t,s)<0)return!1;return!0},d=Array.prototype.indexOf||function(e,t){var s,n,r;for(s=n=0,r=e.length;0<=r?n<=r:n>=r;s=0<=r?++n:--n)if(e[s]===t)return s;return-1},m=function(e,t){var s,n,r,i,o;for(o=0,r=0,i=e.length;r<i;r++){if(n=e[r],!((s=d.call(t,n))>=o))return!1;o=s}return!0},b=function(){if(O.debug)return console.log(...arguments)},p=function(e){var t,s,n;s=!1;for(t in v)if(n=v[t],e===n){s=!0;break}if(!s)for(t in g)if(n=g[t],e===n){s=!0;break}return s},j=function(e){var t,s,n,r,i,o,_,c,u,l,a,f,y,m;for(m=!0,e.keys.length||b("You're trying to bind a combo with no keys:",e),s=r=0,f=e.keys.length;0<=f?r<f:r>f;s=0<=f?++r:--r)n=e.keys[s],(t=k[n])&&(n=e.keys[s]=t),"meta"===n&&e.keys.splice(s,1,w),"cmd"===n&&b('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(_=0,i=(y=e.keys).length;_<i;_++)n=y[_],p(n)||(b(`Do not recognize the key "${n}"`),m=!1);if(z.call(e.keys,"meta")>=0||z.call(e.keys,"cmd")>=0){for(l=e.keys.slice(),u=0,o=x.length;u<o;u++)c=x[u],(s=d.call(l,c))>-1&&l.splice(s,1);l.length>1&&(b("META and CMD key combos cannot have more than 1 non-modifier keys",e,l),m=!1)}for(a in e)e[a],"undefined"===h[a]&&b(`The property ${a} is not a valid combo property. Your combo has still been registered.`);return m},l=function(e,t){var s;return!!t.shiftKey&&(null!=(s=g[e])&&s)},q={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},k={escape:"esc",control:"ctrl",command:"cmd",break:"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},g={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},v={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num",59:";",61:"=",173:"-"},O._keycode_dictionary=v,O._is_array_in_array_sorted=m,a(),o(),n=[],void 0!==(r=function(){return O}.apply(t,n))&&(e.exports=r)}])});